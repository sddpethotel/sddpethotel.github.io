import{Q as h}from"./QImg.8735273d.js";import{Q as P,a as f}from"./QTabs.dd243adb.js";import{Q as F,a as v}from"./QTabPanels.dfd89b55.js";import{Q as C}from"./QSeparator.9d997a39.js";import{Q as S}from"./QSpinnerOrbit.57ba873c.js";import{Q as l}from"./QInput.bba9a822.js";import{Q as b,a as k}from"./QBtn.9996c0f7.js";import{S as Q}from"./SponsorNameCombo.68f1c13c.js";import{a as _,_ as V,r as y,o as a,c as i,e as r,f as n,w as d,g as U,h as q,j as L,k as $,F as I,p as N,l as R}from"./index.dda7049c.js";import"./uid.42677368.js";import"./touch.5b285bde.js";import"./use-timeout.85ee0991.js";import"./rtl.b51694b1.js";import"./use-dark.94e400c1.js";import"./selection.ebc1c08a.js";import"./use-cache.b0833c75.js";import"./use-key-composition.603e6653.js";import"./focus-manager.05708ea9.js";import"./pet-store.04b64423.js";const z=_({name:"RegisterForm",components:{SponsorNameCombo:Q},methods:{submitForm(){console.log(this.$testString),this.$testString="asd",console.log(this.$testString),this.$api.post("api/v1/register/user",{name:this.name,sponsor:this.sponsor,email:this.email,contact_number:this.contact_number,address:this.address,password:this.password,username:this.username}).then(e=>{this.is_registering=!1}).catch(e=>{console.log(e)})}},data(){return{username:"",number_name_match:!1,sponsor:"",member_name:"",name:"",email:"",contact_number:"",address:"",password:"",isPwd:!0,isPwd2:!0,password_repeat:"",is_registering:!0,sponsor_name:""}}}),A={key:0,style:{"max-width":"500p"},class:"column"},T={class:"row q-pb-md",style:{gap:"5px"}},B={key:1,class:"column"};function j(e,s,u,c,g,w){const t=y("SponsorNameCombo");return e.is_registering?(a(),i("div",A,[r("div",T,[n(t,{onUpdate_match:s[0]||(s[0]=o=>e.number_name_match=o),onSponsor:s[1]||(s[1]=o=>e.sponsor=o),onSponsor_name:s[2]||(s[2]=o=>e.sponsor_name=o)})]),n(l,{dense:"","lazy-rules":"ondemand",modelValue:e.name,"onUpdate:modelValue":s[3]||(s[3]=o=>e.name=o),label:"Name",outlined:"",rules:[o=>!!o||"Field is required"]},null,8,["modelValue","rules"]),n(l,{modelValue:e.email,"onUpdate:modelValue":s[4]||(s[4]=o=>e.email=o),"lazy-rules":"ondemand",dense:"",label:"Email",rules:["email",o=>!!o||"Field is required"],outlined:""},null,8,["modelValue","rules"]),n(l,{modelValue:e.contact_number,"onUpdate:modelValue":s[5]||(s[5]=o=>e.contact_number=o),label:"Contact Number",outlined:"","lazy-rules":"ondemand",dense:"",rules:[o=>!!o||"Field is required"]},null,8,["modelValue","rules"]),n(l,{modelValue:e.address,"onUpdate:modelValue":s[6]||(s[6]=o=>e.address=o),label:"Address","lazy-rules":"ondemand",outlined:"",dense:"",rules:[o=>!!o||"Field is required"]},null,8,["modelValue","rules"]),n(l,{dense:"","lazy-rules":"ondemand",modelValue:e.username,"onUpdate:modelValue":s[7]||(s[7]=o=>e.username=o),label:"Username",outlined:"",rules:[o=>!!o||"Field is required"]},null,8,["modelValue","rules"]),n(l,{modelValue:e.password,"onUpdate:modelValue":s[9]||(s[9]=o=>e.password=o),"lazy-rules":"ondemand",filled:"",dense:"",label:"Enter password",type:e.isPwd?"password":"text",rules:[o=>!!o||"Field is required"]},{append:d(()=>[n(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[8]||(s[8]=o=>e.isPwd=!e.isPwd)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),n(l,{modelValue:e.password_repeat,"onUpdate:modelValue":s[11]||(s[11]=o=>e.password_repeat=o),"lazy-rules":"ondemand",label:"Repeat password",filled:"",dense:"",type:e.isPwd2?"password":"text",rules:[o=>!!o||"Field is required",o=>o==e.password||"Passwords do not match."]},{append:d(()=>[n(b,{name:e.isPwd2?"visibility_off":"visibility",class:"cursor-pointer",onClick:s[10]||(s[10]=o=>e.isPwd2=!e.isPwd2)},null,8,["name"])]),_:1},8,["modelValue","type","rules"]),n(k,{disable:!e.number_name_match,label:"Submit",onClick:e.submitForm,class:"full-width bg-green-4"},null,8,["disable","onClick"])])):(a(),i("div",B,[n(b,{name:"check_circle",color:"green",size:"50px"}),U(" Registration complete. Please check your e-mail to confirm your account. ")]))}var E=V(z,[["render",j]]);const K=_({name:"RegisterForm",props:["is_member_login"],emits:["login_success"],watch:{username(){this.isValidPassword=!0,this.isValidAccount=!0},password(){this.isValidPassword=!0,this.isValidAccount=!0}},methods:{submitForm(){this.password==""||this.username==""||this.$api.post(`api/v1/account/${this.is_member_login?"member/login":"login"}`,{username:this.username,password:this.password}).then(e=>{this.$emit("login_success");const s=e.data;console.log(s),localStorage.setItem("user_token",s.token),localStorage.setItem("is_member",s.is_member),localStorage.setItem("has_pet",s.has_pet),setTimeout(()=>{s.has_pet?this.$router.push("/dashboard"):this.$router.push("/addpet/new")},1500)}).catch(e=>{switch(e.response.status){case 500:this.isValidAccount=!1;break;case 401:this.isValidPassword=!1;break}})}},data(){return{isPwd:!0,password:"",username:"",isValidAccount:!0,isValidPassword:!0}}}),M={style:{"max-width":"500px","border-radius":"10px"},class:"q-gutter-y-md"};function O(e,s,u,c,g,w){return a(),i("div",M,[n(l,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=t=>e.username=t),label:e.is_member_login?"Member Number":"Username",outlined:"","error-message":"Invalid account.",error:!e.isValidAccount},null,8,["modelValue","label","error"]),n(l,{modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=t=>e.password=t),label:"Password",outlined:"",onKeyup:q(e.submitForm,["enter"]),"error-message":"Invalid password.",error:!e.isValidPassword,type:e.isPwd?"password":"text"},{append:d(()=>[n(b,{name:e.isPwd?"visibility_off":"visibility",class:"cursor-pointer","error-message":"Invalid password.",error:!e.isValidPassword,onClick:s[1]||(s[1]=t=>e.isPwd=!e.isPwd)},null,8,["name","error"])]),_:1},8,["modelValue","onKeyup","error","type"]),n(k,{label:"Log In",onClick:e.submitForm,class:"full-width bg-green-4"},null,8,["onClick"])])}var Y=V(K,[["render",O]]);const D=_({name:"LoginPage",components:{RegisterForm:E,LoginForm:Y},methods:{login_success_ok(){this.login_success=!0}},data(){return{mode:"login",login_type:"member",login_success:!1}}}),p=e=>(N("data-v-623ec6b0"),e=e(),R(),e),G={key:0,class:"animated-background window-height window-width"},H={key:1,class:"parent column"},J={key:2,class:"bg-white q-pa-md deep-shadow-2",style:{width:"300px","border-radius":"12px"}},W={class:"text-italic text-grey q-pt-md"},X=p(()=>r("span",null," Not a member? Click ",-1)),Z=p(()=>r("span",null," to login. ",-1)),x={key:3,style:{width:"300px"},class:"deep-shadow-2"},ee={class:"text-italic text-grey q-pt-md"},se=p(()=>r("span",null," Click ",-1)),oe=p(()=>r("span",null," to go to member's login. ",-1)),ne={class:"row justify-center"},re={key:2,class:"parent shadow-2 q-pa-md bg-white"},ae=p(()=>r("span",{class:"q-ml-md"},"Logging in...",-1));function te(e,s,u,c,g,w){const t=y("LoginForm"),o=y("RegisterForm");return a(),i(I,null,[e.login_success?(a(),i("div",G)):L("",!0),e.login_success?(a(),i("div",re,[r("span",null,[n(S,{color:"primary",size:"2em"})]),ae])):(a(),i("div",H,[e.login_type=="member"?(a(),$(h,{key:0,class:"not-selectable",src:`${e.$mediaURL}/pethotel/assets/logo2.png`,width:"60%",style:{transform:"rotate(12deg) translate(40px, 20px)","z-index":"100"},"no-spinner":""},null,8,["src"])):(a(),$(h,{key:1,src:`${e.$mediaURL}/pethotel/assets/sumie.webp`,style:{transform:"translateY(12px)"},width:"40%","no-spinner":""},null,8,["src"])),e.login_type=="member"?(a(),i("div",J,[n(t,{is_member_login:!0,onLogin_success:e.login_success_ok},null,8,["onLogin_success"]),r("div",W,[X,r("span",{class:"text-bold text-black cursor-pointer",onClick:s[0]||(s[0]=m=>e.login_type="as")}," here "),Z])])):(a(),i("div",x,[n(P,{modelValue:e.mode,"onUpdate:modelValue":s[1]||(s[1]=m=>e.mode=m),align:"justify","indicator-color":"transparent ",class:"bg-grey-3 rounded-border","active-bg-color":"white","active-class":"active-tab"},{default:d(()=>[n(f,{name:"login",label:"Login"}),n(f,{name:"register",label:"Register"})]),_:1},8,["modelValue"]),n(F,{modelValue:e.mode,"onUpdate:modelValue":s[3]||(s[3]=m=>e.mode=m)},{default:d(()=>[n(v,{name:"register"},{default:d(()=>[n(o)]),_:1}),n(v,{name:"login"},{default:d(()=>[n(t,{onLogin_success:e.login_success_ok},null,8,["onLogin_success"]),n(C,{class:"q-mt-md"}),r("div",ee,[se,r("span",{class:"text-bold text-black cursor-pointer",onClick:s[2]||(s[2]=m=>e.login_type="member")}," here "),oe])]),_:1})]),_:1},8,["modelValue"])])),r("div",ne,[n(h,{src:`${e.$mediaURL}/pethotel/assets/bcc2.png`,width:"50%",class:"q-mt-md"},null,8,["src"])])]))],64)}var qe=V(D,[["render",te],["__scopeId","data-v-623ec6b0"]]);export{qe as default};
