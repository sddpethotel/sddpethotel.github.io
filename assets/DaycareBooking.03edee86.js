import{Q as g}from"./QInput.bba9a822.js";import{D as f}from"./DashboardToolbar.41fc4a83.js";import{_ as b,a0 as v,a as y,r as i,o as k,c as h,f as t,w as n,F as S,e as m,g as R,a7 as D}from"./index.dda7049c.js";import{u as B}from"./pet-store.04b64423.js";import{G}from"./GeneralReservation.14b5af34.js";import{G as N}from"./GeneralServiceSelector.3b8997cd.js";import{p as w}from"./datafetcher.ff370c84.js";import{R as I}from"./RoomReservationSummary.e44437f3.js";import"./use-key-composition.603e6653.js";import"./QBtn.9996c0f7.js";import"./use-dark.94e400c1.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QBar.670e86f8.js";import"./QCardSection.71e88b5c.js";import"./QPopupProxy.e2c68b68.js";import"./use-cache.b0833c75.js";import"./date.528ab822.js";import"./format.2bc25e5f.js";import"./QDialog.af084a99.js";import"./use-timeout.85ee0991.js";import"./scroll.bf116c29.js";import"./QMenu.cb6c7205.js";import"./selection.ebc1c08a.js";import"./QScrollArea.6a0d07f8.js";import"./touch.5b285bde.js";import"./ClosePopup.84ffc425.js";import"./PetSelector.ac3a0fdd.js";import"./QImg.8735273d.js";import"./SponsorNameCombo.68f1c13c.js";import"./QSeparator.9d997a39.js";import"./QItem.c47cf5af.js";import"./axios.13cf03e6.js";import"./QList.dfd471e7.js";import"./QChip.80c487cc.js";import"./QTabs.dd243adb.js";import"./rtl.b51694b1.js";import"./QTabPanels.dfd89b55.js";import"./QSpinnerOrbit.57ba873c.js";import"./QInnerLoading.7c6a5134.js";import"./SummaryAction.565edeee.js";const d=B(),{booking_summary:T,pets:V,addons:C,addons_checkbox:$}=v(d),P=y({name:"BookingSummary",components:{DashBoardToolbar:f,GeneralReservation:G,GeneralServiceSelector:N,RoomReservationSummary:I},computed:{total_price(){var o=0;return o+=this.booking_summary.price||0,this.addons.filter((e,r)=>this.addons_checkbox[r]).forEach(e=>{o+=e.price}),o},selected_addons(){return this.addons.filter((o,e)=>this.addons_checkbox[e])}},methods:{set_category_name(o,e){console.log(e),this.categoryName=o},submitReservation(){this.loading=!0;const o=d.getSelectedPetId;if(o==null)return;const e=this.selected_addons.map(s=>s.serviceCategoryAddonId),r={sponsor:this.booking_summary.sponsor,petId:o,serviceId:this.booking_summary.serviceId,reservationRemarks:this.booking_summary.remarks,addon:e};w("api/v1/reservation",r,null,()=>{this.loading=!1,this.booking_confirmed=!0},!1)}},setup(){return{booking_summary:T,pets:V,store:d,addons:C,addons_checkbox:$}},data(){return{loading:!1,booking_confirmed:!1,date:{from:"2023/06/21",to:"2023/06/22"},categoryName:null}}}),E={class:"row gap-10"},F={class:"row justify-center"},Q={class:"clamped-width-wide"};function j(o,e,r,s,A,U){const c=i("DashBoardToolbar"),l=i("GeneralServiceSelector"),u=i("RoomReservationSummary"),_=i("GeneralReservation");return k(),h(S,null,[t(c,{title:"Book Daycare"}),t(_,{onSubmitReservation:o.submitReservation,booking_confirmed:o.booking_confirmed,show_date_selector:!0},{dateSelector:n(()=>[m("div",E,[t(g,{modelValue:o.date.from,"onUpdate:modelValue":e[0]||(e[0]=a=>o.date.from=a),outlined:"",label:"Date Start",class:"col"},null,8,["modelValue"])])]),serviceSelector:n(()=>[R(D(o.categoryName)+" ",1),t(l,{"service-type-name":"Daycare",onSet_category_name:o.set_category_name},null,8,["onSet_category_name"])]),reservationSummary:n(()=>{var a,p;return[m("div",F,[m("div",Q,[t(u,{hide_tabs:!0,onSubmitReservation:o.submitReservation,loading:o.loading,booking_confirmed:o.booking_confirmed,pet_name:(a=o.store.getSelectedPetData)==null?void 0:a.name,pet_profilepic:(p=o.store.getSelectedPetData)==null?void 0:p.profilepic,sponsor:o.booking_summary.sponsor,reservation_remarks:o.booking_summary.remarks,price:o.booking_summary.price,addons:o.selected_addons,total_price:o.total_price,"category-name":o.categoryName},null,8,["onSubmitReservation","loading","booking_confirmed","pet_name","pet_profilepic","sponsor","reservation_remarks","price","addons","total_price","category-name"])])])]}),_:1},8,["onSubmitReservation","booking_confirmed"])],64)}var Io=b(P,[["render",j]]);export{Io as default};
