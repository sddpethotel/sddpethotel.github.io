import{c as w,p as S,Q as q,h as v,a as y}from"./QBtn.9996c0f7.js";import{Q as T,a as M}from"./QPopupProxy.e2c68b68.js";import{Q}from"./QInput.bba9a822.js";import{u as k,v as D,ap as Y,m as h,t as i,G as C,D as B,_ as I,a as V,r as E,o as l,c as f,f as r,e as m,w as s,k as P,F as g,z as N,aa as F,a7 as b}from"./index.dda7049c.js";import{u as U,a as j}from"./use-dark.94e400c1.js";import{Q as x}from"./QScrollArea.6a0d07f8.js";import{C as A}from"./ClosePopup.84ffc425.js";import{D as L}from"./DashboardToolbar.41fc4a83.js";import{g as z}from"./datafetcher.ff370c84.js";import"./use-cache.b0833c75.js";import"./use-key-composition.603e6653.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./date.528ab822.js";import"./format.2bc25e5f.js";import"./QDialog.af084a99.js";import"./use-timeout.85ee0991.js";import"./scroll.bf116c29.js";import"./QMenu.cb6c7205.js";import"./selection.ebc1c08a.js";import"./touch.5b285bde.js";import"./axios.13cf03e6.js";var $=w({name:"QTimelineEntry",props:{heading:Boolean,tag:{type:String,default:"h3"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},icon:String,avatar:String,color:String,title:String,subtitle:String,body:String},setup(e,{slots:t}){const o=k(Y,D);if(o===D)return console.error("QTimelineEntry needs to be child of QTimeline"),D;const n=h(()=>`q-timeline__entry q-timeline__entry--${e.side}`+(e.icon!==void 0||e.avatar!==void 0?" q-timeline__entry--icon":"")),c=h(()=>`q-timeline__dot text-${e.color||o.color}`),_=h(()=>o.layout==="comfortable"&&o.side==="left");return()=>{const d=S(t.default,[]);if(e.body!==void 0&&d.unshift(e.body),e.heading===!0){const p=[i("div"),i("div"),i(e.tag,{class:"q-timeline__heading-title"},d)];return i("div",{class:"q-timeline__heading"},_.value===!0?p.reverse():p)}let a;e.icon!==void 0?a=[i(q,{class:"row items-center justify-center",name:e.icon})]:e.avatar!==void 0&&(a=[i("img",{class:"q-timeline__dot-img",src:e.avatar})]);const u=[i("div",{class:"q-timeline__subtitle"},[i("span",{},v(t.subtitle,[e.subtitle]))]),i("div",{class:c.value},a),i("div",{class:"q-timeline__content"},[i("h6",{class:"q-timeline__title"},v(t.title,[e.title]))].concat(d))];return i("li",{class:n.value},_.value===!0?u.reverse():u)}}}),G=w({name:"QTimeline",props:{...U,color:{type:String,default:"primary"},side:{type:String,default:"right",validator:e=>["left","right"].includes(e)},layout:{type:String,default:"dense",validator:e=>["dense","comfortable","loose"].includes(e)}},setup(e,{slots:t}){const o=B(),n=j(e,o.proxy.$q);C(Y,e);const c=h(()=>`q-timeline q-timeline--${e.layout} q-timeline--${e.layout}--${e.side}`+(n.value===!0?" q-timeline--dark":""));return()=>i("ul",{class:c.value},v(t.default))}});const K=V({name:"TimelinePage",components:{DashBoardToolbar:L},computed:{transformed_dates(){const e=this.$formatDate(this.date.from,"MMM DD, YYYY"),t=this.$formatDate(this.date.to,"MMM DD, YYYY");return`${e} - ${t}`},sortedDates(){return this.actions.slice().sort((e,t)=>{const o=new Date(e.dateTime);return new Date(t.dateTime)-o})},dateStart(){return new Date(this.date.from)},dateEnd(){return new Date(this.date.to)},dateDiff(){return(this.dateEnd-this.dateStart)/(1e3*60*60*24)}},methods:{feed_param(e){return e?` with ${e}.`:"."},getdata(){z(`api/v1/action/date/start/${this.dateStart.getTime()}/end/${this.dateEnd.getTime()}`,this.actions)},computeNewDay(e){e=e-1;let t=new Date(this.date.from);return new Date(t.getTime()+e*(24*60*60*1e3)).toLocaleDateString()}},data(){const e=new Date;e.setDate(e.getDate()+2);const t=new Date;return t.setDate(t.getDate()-6),{date:{from:this.$formatDate(t,"YYYY/MM/DD"),to:this.$formatDate(e,"YYYY/MM/DD")},actions:[]}}}),R={class:"q-pa-md bg-white q-ma-sm border-radius-8"},H={class:"row items-center justify-end"},J={class:"q-ma-sm"},O={class:"text-h6 text-italic"},W={key:1,class:"text-italic text-grey-6 bg-white q-pa-md q-ma-md border-radius-8 shadow-1"};function X(e,t,o,n,c,_){const d=E("DashBoardToolbar");return l(),f(g,null,[r(d,{title:"Updates"}),m("div",R,[r(Q,{filled:"",modelValue:e.transformed_dates,"onUpdate:modelValue":t[1]||(t[1]=a=>e.transformed_dates=a),readonly:""},{after:s(()=>[r(y,{label:"filter",onClick:e.getdata},null,8,["onClick"])]),append:s(()=>[r(q,{name:"event",class:"cursor-pointer"},{default:s(()=>[r(T,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:s(()=>[r(M,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=a=>e.date=a),range:"","navigation-max-year-month":"2023/11"},{default:s(()=>[m("div",H,[N(r(y,{label:"Close",color:"primary",flat:""},null,512),[[A]])])]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),e.sortedDates.length>0?(l(),P(x,{key:0,class:"col"},{default:s(()=>[m("div",J,[r(G,{color:"secondary",class:"bg-white q-pa-sm border-radius-8"},{default:s(()=>[(l(!0),f(g,null,F(e.sortedDates,(a,u)=>(l(),f(g,{key:u},[r($,{color:"orange"},{default:s(()=>[m("div",O,b(e.$formatDate(a.dateTime,"MMM DD, YYYY")),1)]),_:2},1024),r($,{subtitle:` ${e.$formatDate(a.dateTime,"hh:MM A")}`},{default:s(()=>[m("div",null,b(`Pet handler ${a.adminId} has ${a.actionName=="Feed"?"fed":"bathed"}
              your pet Bantay${e.feed_param(a.parameter1)}`),1)]),_:2},1032,["subtitle"])],64))),128))]),_:1})])]),_:1})):(l(),f("div",W," No updates yet for this range of dates. "))],64)}var be=I(K,[["render",X]]);export{be as default};
