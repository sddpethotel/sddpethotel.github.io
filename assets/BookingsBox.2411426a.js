import{Q as B}from"./QSelect.e999bd29.js";import{a as l}from"./QBtn.9996c0f7.js";import{a as E,Q as D}from"./QItem.c47cf5af.js";import{Q as R}from"./QList.dfd471e7.js";import{Q}from"./QMenu.cb6c7205.js";import{Q as w}from"./SummaryAction.565edeee.js";import{Q as V}from"./QScrollArea.6a0d07f8.js";import{C as L}from"./ClosePopup.84ffc425.js";import{a as k,_ as $,o as a,k as b,ab as u,r as f,c as v,f as t,e as g,w as r,F as S,aa as y,ao as N,z as T,g as I,a7 as G,j as U}from"./index.dda7049c.js";import{R as Y}from"./RoomReservationSummary.e44437f3.js";import{d as A}from"./date.528ab822.js";import{D as M}from"./DashboardToolbar.41fc4a83.js";import{U as q}from"./URLStrings.70d3a492.js";import{g as F}from"./datafetcher.ff370c84.js";import"./use-key-composition.603e6653.js";import"./use-dark.94e400c1.js";import"./uid.42677368.js";import"./focus-manager.05708ea9.js";import"./QChip.80c487cc.js";import"./QDialog.af084a99.js";import"./use-timeout.85ee0991.js";import"./scroll.bf116c29.js";import"./rtl.b51694b1.js";import"./format.2bc25e5f.js";import"./selection.ebc1c08a.js";import"./touch.5b285bde.js";import"./QImg.8735273d.js";import"./QSeparator.9d997a39.js";import"./QCardSection.71e88b5c.js";import"./QTabs.dd243adb.js";import"./QTabPanels.dfd89b55.js";import"./use-cache.b0833c75.js";import"./QSpinnerOrbit.57ba873c.js";import"./QInnerLoading.7c6a5134.js";import"./pet-store.04b64423.js";import"./axios.13cf03e6.js";const P=k({emits:["status"],props:["time_filter","label","icon"],name:"StatusButton"});function j(e,o,n,d,m,i){return a(),b(l,{label:e.label,icon:e.icon,class:u(e.time_filter==e.label?"bg-blue-2":"text-grey"),push:e.time_filter!=e.label,onClick:o[0]||(o[0]=_=>e.$emit("status",e.label))},null,8,["label","icon","class","push"])}var z=$(P,[["render",j]]);const O=k({emits:["event"],props:["event_filter","label"],name:"EventButton"});function H(e,o,n,d,m,i){return a(),b(l,{label:e.label,class:u(e.event_filter==e.label?"bg-blue-2":"text-grey"),push:e.event_filter!=e.label,onClick:o[0]||(o[0]=_=>e.$emit("event",e.label))},null,8,["label","class","push"])}var J=$(O,[["render",H]]);const K=k({name:"BookingsBox",components:{EventButton:J,StatusButton:z,RoomReservationSummary:Y,DashboardToolbar:M},props:["service","status","id"],setup(){return{services:["Room","Grooming","Daycare","Vet"],statuses:["All","Pending","Scheduled","Checkedin","Completed"],date:A}},computed:{badge_color(){if(this.dropdown_status==null)return"white";switch(this.dropdown_status.toLowerCase()){case"pending":return"bg-purple-2";case"scheduled":return"bg-blue-2";case"completed":return"bg-green-2";case"checked in":return"bg-yellow-2";default:return"white"}}},mounted(){console.log(this.$props),this.id&&F(`${q.GET_RESERVATION_BY_ID}${this.id}`,this.reservations),this.service&&this.refreshData(this.service)},methods:{filter_service(e){return this.dropdown_status==""||this.dropdown_status=="All"?!0:this.dropdown_status.toLowerCase()==e.toLowerCase()},fetch_reservations(){this.refreshData(this.dropdown_service.toLowerCase())},getDate(e){return this.date.formatDate(e,"MMM D, YYYY")},getEvent(e){this.dropdown_service=e},getStatus(e){this.dropdown_status=e},refreshData(e){e==null||e==""||this.$api.get(`api/v1/reservation/type/${e}/owner`).then(o=>{this.reservations.length=0,o.data.forEach(n=>{this.reservations.push(n)})}).catch(o=>{console.log(o)})}},data(){const e=[],o="all",n="image",d=this.service?this.service.replace(/\b\w/g,i=>i.toUpperCase()):"",m=this.status?this.status.replace(/\b\w/g,i=>i.toUpperCase()):"";return{reservations:e,tab:o,view:n,dropdown_service:d,dropdown_status:m}}}),W={class:"row bg-white gap-10 q-pa-sm q-ma-xs to-hide-dropdown deep-shadow",style:{"border-radius":"5px"}},X={class:"row q-mb-xl to-hide-toolbar justify-center",style:{gap:"10px"}},Z={class:"column align-center"};function x(e,o,n,d,m,i){const _=f("DashboardToolbar"),c=f("EventButton"),p=f("StatusButton"),C=f("RoomReservationSummary");return a(),v(S,null,[t(_,{title:"Bookings"}),g("div",W,[t(B,{dense:"",class:"col",options:e.services,modelValue:e.dropdown_service,"onUpdate:modelValue":o[0]||(o[0]=s=>e.dropdown_service=s),label:"Service",outlined:""},null,8,["options","modelValue"]),t(l,{icon:"search",onClick:e.fetch_reservations},null,8,["onClick"]),g("div",null,[t(l,{label:e.dropdown_status==""?"Filter":e.dropdown_status,disable:e.reservations.length==0,class:u(e.badge_color)},null,8,["label","disable","class"]),t(Q,null,{default:r(()=>[t(R,{style:{"min-width":"150px"},separator:""},{default:r(()=>[(a(!0),v(S,null,y(e.statuses,(s,h)=>T((a(),b(E,{key:h,clickable:"",onClick:ee=>e.dropdown_status=s},{default:r(()=>[t(D,null,{default:r(()=>[I(G(s),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[L]])),128))]),_:1})]),_:1})])]),g("div",X,[t(w,{class:"bg-white"},{default:r(()=>[t(c,{event_filter:e.dropdown_service,label:"Room",onEvent:e.getEvent},null,8,["event_filter","onEvent"]),t(c,{event_filter:e.dropdown_service,label:"Grooming",onEvent:e.getEvent},null,8,["event_filter","onEvent"]),t(c,{event_filter:e.dropdown_service,label:"Daycare",onEvent:e.getEvent},null,8,["event_filter","onEvent"]),t(c,{event_filter:e.dropdown_service,label:"Vet",onEvent:e.getEvent},null,8,["event_filter","onEvent"])]),_:1}),t(w,{class:"bg-white"},{default:r(()=>[t(p,{time_filter:e.dropdown_status,label:"Pending",onStatus:e.getStatus},null,8,["time_filter","onStatus"]),t(p,{time_filter:e.dropdown_status,label:"Scheduled",onStatus:e.getStatus},null,8,["time_filter","onStatus"]),t(p,{time_filter:e.dropdown_status,label:"Ongoing",onStatus:e.getStatus},null,8,["time_filter","onStatus"]),t(p,{time_filter:e.dropdown_status,label:"Completed",onStatus:e.getStatus},null,8,["time_filter","onStatus"]),t(p,{time_filter:e.dropdown_status,label:"Declined",onStatus:e.getStatus},null,8,["time_filter","onStatus"])]),_:1}),t(w,{class:"bg-white"},{default:r(()=>[t(l,{icon:"toc",push:"",onClick:o[1]||(o[1]=s=>e.view="table"),class:u(e.view=="table"?"bg-blue-2":"text-grey")},null,8,["class"]),t(l,{icon:"image",push:"",onClick:o[2]||(o[2]=s=>e.view="image"),class:u(e.view=="image"?"bg-blue-2":"text-grey")},null,8,["class"])]),_:1})]),t(V,{class:"col"},{default:r(()=>[g("div",Z,[t(N,{name:"bounce"},{default:r(()=>[(a(!0),v(S,null,y(e.reservations,(s,h)=>(a(),v("div",{key:h},[e.filter_service(s.status)?(a(),b(C,{key:0,sponsor:s.sponsor,reservation_remarks:s.reservationRemarks,staff_remarks:s.staff_remarks,pet_name:s.petName,pet_profilepic:s.profilepic,price:s.price,total_price:s.total_price,"reservation-id":s.serviceReservationId,is_room_reservation:e.dropdown_service=="Room","category-name":s.categoryName,"pet-id":s.petId,status:s.status},null,8,["sponsor","reservation_remarks","staff_remarks","pet_name","pet_profilepic","price","total_price","reservation-id","is_room_reservation","category-name","pet-id","status"])):U("",!0)]))),128))]),_:1})])]),_:1})],64)}var Ue=$(K,[["render",x]]);export{Ue as default};
