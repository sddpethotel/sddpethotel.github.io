import{c as P,d as x}from"./QBtn.9996c0f7.js";import{m as C,t as M,a as L,_ as V,o as s,k as d,w as t,f as a,g as o,c as u,j as l,F as p,aa as h,a7 as n,a0 as U,r as q,e as y,p as Y,l as z}from"./index.dda7049c.js";import{Q as G}from"./QImg.8735273d.js";import{Q as r,a as f}from"./QItem.c47cf5af.js";import{Q as w}from"./QSeparator.9d997a39.js";import{Q as D}from"./QList.dfd471e7.js";import{a as S,Q as E}from"./QCardSection.71e88b5c.js";import{Q as B}from"./DashboardToolbar.41fc4a83.js";import{Q as N}from"./QChip.80c487cc.js";import{a as $,Q as F}from"./QTabs.dd243adb.js";import{a as Q,Q as j}from"./QTabPanels.dfd89b55.js";import{Q as H}from"./QSpinnerOrbit.57ba873c.js";import{Q as O}from"./QInnerLoading.7c6a5134.js";import{S as J}from"./SummaryAction.565edeee.js";import{u as K}from"./pet-store.04b64423.js";import{g as R}from"./datafetcher.ff370c84.js";const W=["top","middle","bottom"];var X=P({name:"QBadge",props:{color:String,textColor:String,floating:Boolean,transparent:Boolean,multiLine:Boolean,outline:Boolean,rounded:Boolean,label:[Number,String],align:{type:String,validator:e=>W.includes(e)}},setup(e,{slots:i}){const _=C(()=>e.align!==void 0?{verticalAlign:e.align}:null),b=C(()=>{const g=e.outline===!0&&e.color||e.textColor;return`q-badge flex inline items-center no-wrap q-badge--${e.multiLine===!0?"multi":"single"}-line`+(e.outline===!0?" q-badge--outline":e.color!==void 0?` bg-${e.color}`:"")+(g!==void 0?` text-${g}`:"")+(e.floating===!0?" q-badge--floating":"")+(e.rounded===!0?" q-badge--rounded":"")+(e.transparent===!0?" q-badge--transparent":"")});return()=>M("div",{class:b.value,style:_.value,role:"status","aria-label":e.label},x(i.default,e.label!==void 0?[e.label]:[]))}});const Z=L({props:["room_reservations"],name:"RoomReservation"});function ee(e,i,_,b,g,I){return s(),d(D,{bordered:"",separator:""},{default:t(()=>[a(f,null,{default:t(()=>{var m;return[a(r,{class:"text-italic"},{default:t(()=>[o("Date")]),_:1}),e.room_reservations?(s(),u(p,{key:0},[(m=e.room_reservations[0])!=null&&m.roomLabel?(s(),d(r,{key:0,class:"text-italic"},{default:t(()=>[o("Room Label")]),_:1})):l("",!0)],64)):l("",!0),a(r,{class:"text-italic",side:""},{default:t(()=>[o("Room ID")]),_:1})]}),_:1}),(s(!0),u(p,null,h(e.room_reservations,(m,k)=>(s(),d(f,{key:k},{default:t(()=>[a(r,null,{default:t(()=>[o(n(e.$formatDate(m.dateStart||m.date,"MMM DD, YYYY")),1)]),_:2},1024),m!=null&&m.roomLabel?(s(),d(r,{key:0},{default:t(()=>[o(n(m==null?void 0:m.roomLabel),1)]),_:2},1024)):l("",!0),a(r,{side:""},{default:t(()=>[o(n(m.roomId),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})}var te=V(Z,[["render",ee]]);const A=K(),{show_summary:ae}=U(A),se=L({name:"ReservationSummary",emits:["submitReservation"],props:["hide_tabs","is_booking","loading","booking_confirmed","pet_name","pet_profilepic","reservationId","sponsor","reservation_remarks","staff_remarks","room_reservations","price","total_price","is_room_reservation","addons","categoryName","petId","status"],setup(){const e=localStorage.getItem("is_member");return{store:A,show_summary:ae,is_member:e}},mounted(){this.reservationId!=null&&(R(`api/v1/reservation/room_reservations/${this.reservationId}`,this.room_reservation_datas),this.addons||R(`api/v1/addon/reservation/${this.reservationId}`,this.extra_addons))},components:{SummaryAction:J,GeneralRoomReservationData:te},computed:{badge_color(){switch(this.status){case"Pending":return"purple";case"Scheduled":return"blue";case"Completed":return"green";case"Checkedin":return"pink";default:return"white"}}},watch:{tab(e){e=="pics"&&this.reservation_pics.length==0?this.update_reservation_pics():this.actions.length==0&&this.update_activities()}},methods:{show_more_activate(){this.show_more=!0},update_activities(){R(`api/v1/action/reservation/${this.reservationId}`,this.actions)},update_reservation_pics(){this.$api.get(`api/v1/pethotel/pictures/reservation/${this.petId}/${this.reservationId}`).then(e=>{this.reservation_pics.length=0,e.data.forEach(i=>{this.reservation_pics.push(i)})}).catch(e=>{console.log(e)})}},data(){const e=[],i=[],_=this.is_room_reservation?"rooms":"pics";return{actions:[],room_reservation_datas:e,extra_addons:i,tab:_,reservation_pics:[],show_more:!1}}}),T=e=>(Y("data-v-73631799"),e=e(),z(),e),oe=T(()=>y("div",{class:"text-grey-6 text-italic q-mt-md"},"Addon(s):",-1)),re=T(()=>y("div",{class:"text-grey-6 text-italic q-mt-md"},"Addon(s):",-1)),ie={class:"row q-pb-md gradient-grey"},le={key:0,class:"text-italic text-grey-6"},ne=["src"],de={key:0,class:"text-italic text-grey-6"},ue={key:1};function me(e,i,_,b,g,I){const m=q("GeneralRoomReservationData"),k=q("SummaryAction");return s(),u(p,null,[e.booking_confirmed?l("",!0):(s(),d(E,{key:0,class:"q-ma-sm reservation-card",style:{"border-right":"3px solid green"}},{default:t(()=>[e.status?(s(),d(X,{key:0,color:e.badge_color,floating:"",class:"q-mr-sm"},{default:t(()=>[o(n(e.status),1)]),_:1},8,["color"])):l("",!0),a(G,{src:`${e.$mediaURL}/pethotel/pet/320/${e.pet_profilepic}.webp`,ratio:1,class:"row absolute",style:{"z-index":"100",top:"12px",right:"12px",width:"clamp(80px, 15vw, 180px)","border-radius":"4px",border:"1px solid rgb(207, 207, 207)"}},null,8,["src"]),a(S,{class:"col-grow"},{default:t(()=>[a(D,null,{default:t(()=>[a(f,{dense:"",style:{"font-size":"24px",width:"230px"}},{default:t(()=>[a(r,{class:"text-grey-8 q-mb-sm text-bold"},{default:t(()=>[y("span",null,n(e.categoryName),1)]),_:1})]),_:1}),e.reservationId?(s(),d(f,{key:0,dense:""},{default:t(()=>[a(r,{avatar:"",class:"text-grey-6"},{default:t(()=>[o(" Reservation ID: ")]),_:1}),a(r,null,{default:t(()=>[o(n(e.reservationId),1)]),_:1})]),_:1})):l("",!0),a(f,{dense:""},{default:t(()=>[a(r,{avatar:"",class:"text-grey-6"},{default:t(()=>[o(" Pet Name: ")]),_:1}),a(r,null,{default:t(()=>[o(n(e.pet_name),1)]),_:1})]),_:1}),e.is_member?l("",!0):(s(),d(f,{key:1,dense:""},{default:t(()=>[a(r,{avatar:"",class:"text-grey-6"},{default:t(()=>[o(" Sponsor: ")]),_:1}),a(r,null,{default:t(()=>[o(n(e.sponsor),1)]),_:1})]),_:1})),e.staff_remarks?(s(),d(f,{key:2,dense:""},{default:t(()=>[a(r,{avatar:"",class:"text-grey-6"},{default:t(()=>[o(" Staff Remarks: ")]),_:1}),a(r,null,{default:t(()=>[o(n(e.staff_remarks),1)]),_:1})]),_:1})):l("",!0),a(f,{dense:""},{default:t(()=>[a(r,{avatar:"",class:"text-grey-6"},{default:t(()=>[o(" Reservation Remarks: ")]),_:1}),a(r,null,{default:t(()=>[o(n(e.reservation_remarks||"None"),1)]),_:1})]),_:1}),e.addons?(s(),u(p,{key:3},[e.addons.length>0?(s(),u(p,{key:0},[a(w,{class:"q-mt-md"}),oe,(s(!0),u(p,null,h(e.addons,(c,v)=>(s(),d(f,{dense:"",key:v},{default:t(()=>[a(r,null,{default:t(()=>[o(n(c.addonName),1)]),_:2},1024),a(r,{side:"",class:"text-black text-bold"},{default:t(()=>[o("\u20B1 "+n(c.price),1)]),_:2},1024)]),_:2},1024))),128))],64)):l("",!0)],64)):l("",!0),e.extra_addons.length>0?(s(),u(p,{key:4},[a(w,{class:"q-mt-md"}),re,(s(!0),u(p,null,h(e.extra_addons,(c,v)=>(s(),d(f,{dense:"",key:v},{default:t(()=>[a(r,null,{default:t(()=>[o(n(c.addonName),1)]),_:2},1024),a(r,{side:"",class:"text-black text-bold"},{default:t(()=>[o("\u20B1 "+n(c.price),1)]),_:2},1024)]),_:2},1024))),128))],64)):l("",!0)]),_:1})]),_:1}),y("div",ie,[a(B),e.hide_tabs?l("",!0):(s(),u(p,{key:0},[e.show_more?(s(),d(N,{key:1,icon:"arrow_circle_up",class:"bg-green-4",clickable:"",onClick:i[0]||(i[0]=c=>e.show_more=!1)},{default:t(()=>[o("Show Less")]),_:1})):(s(),d(N,{key:0,icon:"arrow_circle_down",class:"bg-green-4",clickable:"",onClick:e.show_more_activate},{default:t(()=>[o("Show More")]),_:1},8,["onClick"]))],64)),a(B)]),a(S,null,{default:t(()=>[a(f,{dense:""},{default:t(()=>[a(r,{class:"text-grey-6"},{default:t(()=>[o(" Price: ")]),_:1}),a(r,{side:"",class:"text-bold text-black"},{default:t(()=>[o("\u20B1 "+n(e.price),1)]),_:1})]),_:1}),a(f,{dense:""},{default:t(()=>[a(r,{class:"text-grey-6"},{default:t(()=>[o(" Total: ")]),_:1}),a(r,{side:"",class:"text-bold text-black"},{default:t(()=>[o("\u20B1 "+n(e.total_price),1)]),_:1})]),_:1})]),_:1}),e.show_more&&!e.hide_tabs?(s(),d(S,{key:1,class:"q-pa-none"},{default:t(()=>[a(w),a(F,{modelValue:e.tab,"onUpdate:modelValue":i[1]||(i[1]=c=>e.tab=c),stretch:"",class:"fit bg-grey-4","active-class":"active-tab bg-white",dense:"","indicator-color":"transparent"},{default:t(()=>[e.is_room_reservation?(s(),d($,{key:0,name:"rooms",class:"full-width",label:"Rooms"})):l("",!0),e.is_booking?l("",!0):(s(),d($,{key:1,name:"pics",class:"full-width",label:"Pics"})),e.is_booking?l("",!0):(s(),d($,{key:2,name:"activities",class:"full-width",label:"Activities"}))]),_:1},8,["modelValue"]),a(j,{modelValue:e.tab,"onUpdate:modelValue":i[2]||(i[2]=c=>e.tab=c)},{default:t(()=>[a(Q,{name:"rooms"},{default:t(()=>[a(m,{room_reservations:e.room_reservations||e.room_reservation_datas},null,8,["room_reservations"])]),_:1}),a(Q,{name:"pics"},{default:t(()=>[e.reservation_pics.length==0?(s(),u("div",le," No pictures yet for this particular reservation. ")):(s(!0),u(p,{key:1},h(e.reservation_pics,(c,v)=>(s(),u("img",{key:v,src:`${e.$mediaURL}/pethotel/reservation/320/${c.filename}.webp`},null,8,ne))),128))]),_:1}),a(Q,{name:"activities"},{default:t(()=>[e.actions.length==0?(s(),u("div",de," No activities yet for this particular reservation. ")):(s(),u(p,{key:1},[o(n(e.actions),1)],64))]),_:1})]),_:1},8,["modelValue"])]),_:1})):l("",!0),a(O,{showing:e.loading},{default:t(()=>[a(H,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1})),e.loading!=null?(s(),u("div",ue,[a(k,{onHide_summary:i[3]||(i[3]=c=>e.show_summary=!1),onSubmitReservation:i[4]||(i[4]=c=>e.$emit("submitReservation")),booking_confirmed:e.booking_confirmed},null,8,["booking_confirmed"])])):l("",!0)],64)}var Ce=V(se,[["render",me],["__scopeId","data-v-73631799"]]);export{Ce as R};
