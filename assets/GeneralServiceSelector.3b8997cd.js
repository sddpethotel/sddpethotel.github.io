import{Q as J}from"./QSeparator.9d997a39.js";import{l as W,d as X,h as Y,m as Z,c as ee,Q as te}from"./QBtn.9996c0f7.js";import{a as se,u as ae}from"./use-dark.94e400c1.js";import{n as E,m as n,t as u,D as oe,a9 as _,A as T,a0 as re,a as le,_ as ne,o as c,c as v,j as y,e as g,F as x,aa as D,ab as N,a7 as b,f as S,k as Q,w as V,g as A}from"./index.dda7049c.js";import{a as ce,h as ie}from"./use-key-composition.603e6653.js";import{Q as P,a as ue}from"./QItem.c47cf5af.js";import{g as de}from"./datafetcher.ff370c84.js";import{u as me}from"./pet-store.04b64423.js";function ve(t,r){const e=E(null),o=n(()=>t.disable===!0?null:u("span",{ref:e,class:"no-outline",tabindex:-1}));function l(i){const a=r.value;i!==void 0&&i.type.indexOf("key")===0?a!==null&&document.activeElement!==a&&a.contains(document.activeElement)===!0&&a.focus():e.value!==null&&(i===void 0||a!==null&&a.contains(i.target)===!0)&&e.value.focus()}return{refocusTargetEl:o,refocusTarget:l}}var ge={xs:30,sm:35,md:40,lg:50,xl:60};const he={...ae,...Z,...ce,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:t=>t==="tf"||t==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},fe=["update:modelValue"];function pe(t,r){const{props:e,slots:o,emit:l,proxy:i}=oe(),{$q:a}=i,d=se(e,a),h=E(null),{refocusTargetEl:f,refocusTarget:C}=ve(e,h),O=W(e,ge),k=n(()=>e.val!==void 0&&Array.isArray(e.modelValue)),q=n(()=>{const s=_(e.val);return k.value===!0?e.modelValue.findIndex(p=>_(p)===s):-1}),m=n(()=>k.value===!0?q.value>-1:_(e.modelValue)===_(e.trueValue)),I=n(()=>k.value===!0?q.value===-1:_(e.modelValue)===_(e.falseValue)),w=n(()=>m.value===!1&&I.value===!1),F=n(()=>e.disable===!0?-1:e.tabindex||0),j=n(()=>`q-${t} cursor-pointer no-outline row inline no-wrap items-center`+(e.disable===!0?" disabled":"")+(d.value===!0?` q-${t}--dark`:"")+(e.dense===!0?` q-${t}--dense`:"")+(e.leftLabel===!0?" reverse":"")),z=n(()=>{const s=m.value===!0?"truthy":I.value===!0?"falsy":"indet",p=e.color!==void 0&&(e.keepColor===!0||(t==="toggle"?m.value===!0:I.value!==!0))?` text-${e.color}`:"";return`q-${t}__inner relative-position non-selectable q-${t}__inner--${s}${p}`}),G=n(()=>{const s={type:"checkbox"};return e.name!==void 0&&Object.assign(s,{".checked":m.value,"^checked":m.value===!0?"checked":void 0,name:e.name,value:k.value===!0?e.val:e.trueValue}),s}),M=ie(G),R=n(()=>{const s={tabindex:F.value,role:t==="toggle"?"switch":"checkbox","aria-label":e.label,"aria-checked":w.value===!0?"mixed":m.value===!0?"true":"false"};return e.disable===!0&&(s["aria-disabled"]="true"),s});function $(s){s!==void 0&&(T(s),C(s)),e.disable!==!0&&l("update:modelValue",L(),s)}function L(){if(k.value===!0){if(m.value===!0){const s=e.modelValue.slice();return s.splice(q.value,1),s}return e.modelValue.concat([e.val])}if(m.value===!0){if(e.toggleOrder!=="ft"||e.toggleIndeterminate===!1)return e.falseValue}else if(I.value===!0){if(e.toggleOrder==="ft"||e.toggleIndeterminate===!1)return e.trueValue}else return e.toggleOrder!=="ft"?e.trueValue:e.falseValue;return e.indeterminateValue}function H(s){(s.keyCode===13||s.keyCode===32)&&T(s)}function K(s){(s.keyCode===13||s.keyCode===32)&&$(s)}const U=r(m,w);return Object.assign(i,{toggle:$}),()=>{const s=U();e.disable!==!0&&M(s,"unshift",` q-${t}__native absolute q-ma-none q-pa-none`);const p=[u("div",{class:z.value,style:O.value,"aria-hidden":"true"},s)];f.value!==null&&p.push(f.value);const B=e.label!==void 0?X(o.default,[e.label]):Y(o.default);return B!==void 0&&p.push(u("div",{class:`q-${t}__label q-anchor--skip`},B)),u("div",{ref:h,class:j.value,...R.value,onClick:$,onKeydown:H,onKeyup:K},p)}}const be=u("div",{key:"svg",class:"q-checkbox__bg absolute"},[u("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[u("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),u("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var _e=ee({name:"QCheckbox",props:he,emits:fe,setup(t){function r(e,o){const l=n(()=>(e.value===!0?t.checkedIcon:o.value===!0?t.indeterminateIcon:t.uncheckedIcon)||null);return()=>l.value!==null?[u("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[u(te,{class:"q-checkbox__icon",name:l.value})])]:[be]}return pe("checkbox",r)}});const ke=me(),{booking_summary:ye,selectedPet:Ie,getSelectedPetData:xe,addons:Se,addons_checkbox:Ve,serviceId:Ce}=re(ke),qe=le({name:"GeneralServiceSelector",props:["serviceTypeName"],emits:["set_category_name"],setup(){return{images:["room","roombath","roommeal"],booking_summary:ye,selectedPet:Ie,getSelectedPetData:xe,addons:Se,addons_checkbox:Ve,serviceId:Ce}},watch:{selectedPet(){this.addons.length=0,this.addons_checkbox.length=0,this.selected=null,this.get_services()}},methods:{get_addons(t){var o,l;const r=localStorage.getItem("is_member")?"Member":"Guest",e={breedId:(o=this.getSelectedPetData)==null?void 0:o.breedId,speciesId:(l=this.getSelectedPetData)==null?void 0:l.speciesId,memberTypeName:r};this.$api.post(`api/v1/addon/categoryId/${t}`,e).then(i=>{this.addons.length=0,this.addons_checkbox.length=0,i.data.forEach(d=>{this.addons_checkbox.push(!1),this.addons.push(d)})})},get_services(){if(this.getSelectedPetData==null)return;const t=this.getSelectedPetData.breedId,r=this.getSelectedPetData.speciesId,o=localStorage.getItem("is_member")===!0?1:0;de(`api/v1/category/appropriate/${t}/${r}/${o}/${this.serviceTypeName}`,this.services)},select_service(t,r,e,o,l){this.selected=t,this.booking_summary.serviceId=r,this.booking_summary.price=o,this.$emit("set_category_name",l.categoryName,l.subcategoryName),this.get_addons(l.serviceCategoryId),this.serviceId=r}},data(){return{selected:null,services:[],serviceCategoryId:null,categoryName:null}}}),$e={class:"q-pa-sm",style:{position:"relative"}},Ne={key:0,class:"text-italic text-grey-6"},Pe={class:"column no-wrap gap-10"},we=["onClick"],Be={class:"row"},Te={key:0},De={class:"text-grey-6"},Qe={class:"text-bold"},Ae={key:1,class:"text-bold"},Ee={class:"text-grey-8"},Oe=g("div",{class:"text-grey-6 text-italic q-mt-md"},"Addon(s):",-1);function Fe(t,r,e,o,l,i){return c(),v("div",$e,[t.services.length==0?(c(),v("div",Ne,"Choose pet to avail a service.")):y("",!0),g("div",Pe,[(c(!0),v(x,null,D(t.services,(a,d)=>(c(),v("div",{class:"col",key:d,onClick:h=>t.select_service(d,a.serviceId,a.currentPriceId,a.price,a)},[g("div",Be,[g("div",{class:N(["q-pa-sm cursor-pointer non-selectable col",t.selected==d?"bg-green-2 deep-shadow":"inactive-service"])},[a.subcategoryName?(c(),v("div",Te,[g("span",De,b(a.categoryName)+": ",1),g("span",Qe,b(a.subcategoryName),1)])):(c(),v("div",Ae,b(a.categoryName),1)),g("div",Ee,b(a.description),1),y("",!0)],2),g("div",{class:N(["q-ml-sm",t.selected==d?"text-bold":"text-grey-7 "])}," \u20B1 "+b(a.price),3)]),t.addons?(c(),v(x,{key:0},[t.addons.length>0&&t.selected==d?(c(),v(x,{key:0},[S(J,{class:"q-mt-md"}),Oe,(c(!0),v(x,null,D(t.addons,(h,f)=>(c(),Q(ue,{dense:"",key:f},{default:V(()=>[h.canManualSelect?(c(),Q(P,{key:0,avatar:""},{default:V(()=>[S(_e,{modelValue:t.addons_checkbox[f],"onUpdate:modelValue":C=>t.addons_checkbox[f]=C},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)):y("",!0),S(P,null,{default:V(()=>[A(b(h.addonName),1)]),_:2},1024),S(P,{side:"",class:N(t.addons_checkbox[f]?"text-black text-bold":"")},{default:V(()=>[A("\u20B1 "+b(h.price),1)]),_:2},1032,["class"])]),_:2},1024))),128))],64)):y("",!0)],64)):y("",!0)],8,we))),128))])])}var Ue=ne(qe,[["render",Fe]]);export{Ue as G};
